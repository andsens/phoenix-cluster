apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
- ../../settings/manifests
- credentials.yaml
- k8s-master.yaml
- k8s-hyper-v.yaml
- namespace.yaml
- Kptfile
- resourcegroup.yaml
replacements:
- source: {fieldPath: data.nfsShares.homeCluster.addr, kind: ConfigMap, name: settings}
  targets:
  - select: {group: batch, kind: Job}
    fieldPaths: ["spec.template.spec.volumes.[name=home-cluster].nfs.server"]
- source: {fieldPath: data.nfsShares.homeCluster.path, kind: ConfigMap, name: settings}
  targets:
  - select: {group: batch, kind: Job}
    fieldPaths: ["spec.template.spec.volumes.[name=home-cluster].nfs.path"]
- source: {fieldPath: data.nfsShares.images.addr, kind: ConfigMap, name: settings}
  targets:
  - select: {group: batch, kind: Job, name: build-k8s-master}
    fieldPaths: ["spec.template.spec.volumes.[name=images].nfs.server"]
  - select: {group: batch, kind: Job, name: build-k8s-hyper-v}
    fieldPaths: ["spec.template.spec.volumes.[name=images].nfs.server"]
- source: {fieldPath: data.nfsShares.images.path, kind: ConfigMap, name: settings}
  targets:
  - select: {group: batch, kind: Job, name: build-k8s-master}
    fieldPaths: ["spec.template.spec.volumes.[name=images].nfs.path"]
  - select: {group: batch, kind: Job, name: build-k8s-hyper-v}
    fieldPaths: ["spec.template.spec.volumes.[name=images].nfs.path"]
