---
$schema: http://json-schema.org/draft-07/schema#
type: object
properties:
  $schema:
    type: string
  domain:
    description: The domain of the cluster
    type: string
    format: hostname
  admin:
    type: object
    description: Configuration of the "admin" user
    properties:
      ssh-key:
        description: The SSH key to add to /home/admin/.ssh/authorized_keys
        type: string
      pwhash:
        description: sudo password for the admin (ssh password authentication is disabled)
        type: string
    required: [ssh-key, pwhash]
    additionalProperties: false
  cidrs:
    type: object
    description: CIDRs specifying the subnets the cluster should allocate for pods, services and loadbalancers
    properties:
      pod:
        description: The subnet all pods will have an IP assigned from
        type: object
        properties:
          ipv4:
            $ref: "#/definitions/ipv4-cidr"
          ipv6:
            $ref: "#/definitions/ipv6-cidr"
        additionalProperties: false
      svc:
        description: The subnet all services will have an IP assigned from
        type: object
        properties:
          ipv4:
            $ref: "#/definitions/ipv4-cidr"
          ipv6:
            $ref: "#/definitions/ipv6-cidr"
        additionalProperties: false
      lb:
        description: The subnet all loadbalancer services will have an IP assigned from
        type: object
        properties:
          ipv4:
            $ref: "#/definitions/ipv4-cidr"
          ipv6:
            $ref: "#/definitions/ipv6-cidr"
        additionalProperties: false
    additionalProperties: false
  bgp:
    type: object
    description: BGP configuration for cilium to advertise routes for your router
    properties:
      router:
        description: Router addresses
        type: object
        properties:
          ipv4:
            $ref: "#/definitions/ipv4-cidr"
          ipv6:
            $ref: "#/definitions/ipv6-cidr"
        additionalProperties: false
    required: [router]
    additionalProperties: false
required: [domain, admin]
additionalProperties: false
definitions:
  ipv4-cidr:
    type: string
    pattern: "^[0-9.]+/[0-9]+$"
  ipv6-cidr:
    type: string
    pattern: "^[0-9a-f:]+/[0-9]+$"
